# Application Settings
APP_NAME=Sparkle
APP_VERSION=0.1.0
DEBUG=True
SECRET_KEY=your-secret-key-here-change-in-production

# Database Configuration
# PostgreSQL (sync URL is OK; runtime auto-converts to asyncpg)
# 本地开发统一密码: devpassword
DATABASE_URL=postgresql+asyncpg://postgres:devpassword@localhost:5432/sparkle

# Cloud PostgreSQL with SSL
# DATABASE_URL=postgresql://user:pass@host:5432/dbname?sslmode=require
# DATABASE_URL=postgresql://user:pass@host:5432/dbname?sslmode=verify-full&sslrootcert=/path/to/ca.pem

# SQLite (Development)
# DATABASE_URL=sqlite:///./sparkle.db

# CORS Settings
BACKEND_CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]

# JWT Settings
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# LLM Service Configuration
# OpenAI Compatible API
LLM_API_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
LLM_API_KEY=your-llm-api-key
LLM_MODEL_NAME=qwen3-coder-plus
LLM_REASON_MODEL_NAME=deepseek-reasoner
LLM_PROVIDER=qwen

# Alternative: DeepSeek
# LLM_API_BASE_URL=https://api.deepseek.com/v1
# LLM_API_KEY=your-deepseek-api-key
# LLM_MODEL_NAME=deepseek-chat

# Alternative: OpenAI (for testing)
# LLM_API_BASE_URL=https://api.openai.com/v1
# LLM_API_KEY=your-openai-api-key
# LLM_MODEL_NAME=gpt-3.5-turbo

# File Storage
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE=52428800  # 50MB in bytes

# Internal API (gateway -> backend)
INTERNAL_API_KEY=

# Redis Configuration
# 本地开发统一密码: devpassword
REDIS_URL=redis://:devpassword@localhost:6379/0

# Celery Configuration
CELERY_BROKER_URL=redis://:devpassword@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:devpassword@localhost:6379/2

# Idempotency Configuration
IDEMPOTENCY_STORE=redis # 'memory' | 'redis' | 'database'

# Logging
LOG_LEVEL=INFO

# DeepSeek Config
DEEPSEEK_API_KEY=your-deepseek-api-key
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_CHAT_MODEL=deepseek-chat
DEEPSEEK_REASON_MODEL=deepseek-reasoner

# Semantic Cache
SEMANTIC_CACHE_ENABLED=true
SEMANTIC_CACHE_SIM_THRESHOLD=0.9
SEMANTIC_CACHE_MAX_CANDIDATES=200

# Expansion Feedback Loop
EXPANSION_AB_TEST_ENABLED=true
EXPANSION_SEMANTIC_DEDUP_ENABLED=true
EXPANSION_SEMANTIC_DEDUP_THRESHOLD=0.15

# Intervention Phase 0
INTERVENTION_REQUIRE_EVIDENCE=true
INTERVENTION_MIN_CONFIDENCE=0.35
INTERVENTION_DEFAULT_INTERRUPT_THRESHOLD=0.5
INTERVENTION_DEFAULT_DAILY_BUDGET=3
INTERVENTION_DEFAULT_COOLDOWN_MINUTES=120
INTERVENTION_QUIET_HOURS_START=22:00
INTERVENTION_QUIET_HOURS_END=07:00
INTERVENTION_BUDGET_TTL_SECONDS=86400

# Event Retention
EVENT_RETENTION_DAYS=30
STATE_RETENTION_DAYS=30
