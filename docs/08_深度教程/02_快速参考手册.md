# å¿«é€Ÿå‚è€ƒæ‰‹å†Œ (Quick Reference)

## ğŸ› ï¸ å¸¸ç”¨å¼€å‘å‘½ä»¤

### å¯åŠ¨ä¸åœæ­¢

| æ“ä½œ | å‘½ä»¤ | è¯´æ˜ |
| :--- | :--- | :--- |
| **å¯åŠ¨åŸºç¡€è®¾æ–½** | `make dev-up` | å¯åŠ¨ PG, Redis, MinIO |
| **å¯åŠ¨æ‰€æœ‰æœåŠ¡** | `make dev-all` | å¯åŠ¨ Infra + Celery + Python + Go |
| **åœæ­¢æ‰€æœ‰æœåŠ¡** | `docker compose down` | åœæ­¢å¹¶ç§»é™¤å®¹å™¨ |
| **é‡å¯ Celery** | `make celery-restart` | é‡å¯ Worker å’Œ Beat |

### ä»£ç ç”Ÿæˆ

| æ“ä½œ | å‘½ä»¤ | è¯´æ˜ |
| :--- | :--- | :--- |
| **Flutterä»£ç ç”Ÿæˆ** | `flutter pub run build_runner build -d` | ç”Ÿæˆ Riverpod/Json/Freezed ä»£ç  |
| **Protoä»£ç ç”Ÿæˆ** | `make proto-gen` | æ ¹æ® .proto ç”Ÿæˆ Go/Python ä»£ç  |
| **DBä»£ç åŒæ­¥** | `make sync-db` | è¿ç§» -> å¯¼å‡ºSchema -> ç”ŸæˆGoä»£ç  |

### æ•°æ®åº“ç®¡ç†

| æ“ä½œ | å‘½ä»¤ | è¯´æ˜ |
| :--- | :--- | :--- |
| **åˆ›å»ºè¿ç§»** | `alembic revision --autogenerate -m "msg"` | Python ç«¯ |
| **æ‰§è¡Œè¿ç§»** | `alembic upgrade head` | Python ç«¯ |
| **è¿æ¥æ•°æ®åº“** | `docker exec -it sparkle_db psql -U postgres` | è¿›å…¥ SQL å‘½ä»¤è¡Œ |

---

## ğŸ” æ•…éšœæ’æŸ¥ (Troubleshooting)

### ç§»åŠ¨ç«¯å¸¸è§é—®é¢˜

**Q: ç¼–è¯‘æŠ¥é”™ `ld: symbol(s) not found for architecture arm64`**
A: ç¯å¢ƒå˜é‡å†²çªã€‚
```bash
unset CC CXX
flutter run
```

**Q: WebSocket è¿æ¥å¤±è´¥**
A: æ£€æŸ¥ Gateway æ˜¯å¦å¯åŠ¨ (`make gateway-dev`)ï¼Œä»¥åŠ `ALLOWED_ORIGINS` é…ç½®ã€‚

### åç«¯å¸¸è§é—®é¢˜

**Q: gRPC `Method not found`**
A: Proto æ–‡ä»¶ä¿®æ”¹åæœªé‡æ–°ç”Ÿæˆä»£ç ã€‚è¿è¡Œ `make proto-gen`ã€‚

**Q: æ•°æ®åº“ `relation does not exist`**
A: æœªè¿è¡Œè¿ç§»ã€‚è¿è¡Œ `cd backend && alembic upgrade head`ã€‚

**Q: Celery ä»»åŠ¡ä¸æ‰§è¡Œ**
A: Worker æœªå¯åŠ¨æˆ– Redis è¿æ¥å¤±è´¥ã€‚æ£€æŸ¥ `make celery-status`ã€‚

---

## ğŸ“¡ ç«¯å£é€ŸæŸ¥è¡¨

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
| :--- | :--- | :--- |
| **PostgreSQL** | 5432 | æ•°æ®åº“ |
| **Redis** | 6379 | ç¼“å­˜/é˜Ÿåˆ— |
| **MinIO API** | 9000 | å¯¹è±¡å­˜å‚¨ API |
| **MinIO Console**| 9001 | å¯¹è±¡å­˜å‚¨æ§åˆ¶å° |
| **Python API** | 8000 | REST API |
| **Python gRPC** | 50051 | å†…éƒ¨ gRPC æœåŠ¡ |
| **Go Gateway** | 8080 | ç½‘å…³ (HTTP/WS) |
| **Grafana** | 3000 | ç›‘æ§çœ‹æ¿ |
| **Prometheus** | 9090 | æŒ‡æ ‡æ”¶é›† |
| **Flower** | 5555 | Celery ç›‘æ§ |

---

## ğŸ“ å‘½åè§„èŒƒ

| ç±»å‹ | è§„èŒƒ | ç¤ºä¾‹ |
| :--- | :--- | :--- |
| **Go åŒ…å** | å…¨å°å†™ï¼Œæ— ä¸‹åˆ’çº¿ | `package gateway` |
| **Python æ¨¡å—** | ä¸‹åˆ’çº¿å‘½å | `chat_service.py` |
| **Dart æ–‡ä»¶** | ä¸‹åˆ’çº¿å‘½å | `chat_provider.dart` |
| **Dart ç±»å** | å¤§é©¼å³° | `ChatNotifier` |
| **API è·¯å¾„** | çƒ¤è‚‰ä¸²å‘½å (kebab-case) | `/api/v1/chat-history` |
| **æ•°æ®åº“è¡¨** | å¤æ•°ï¼Œä¸‹åˆ’çº¿ | `chat_messages` |

