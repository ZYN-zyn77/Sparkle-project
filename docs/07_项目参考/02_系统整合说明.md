è¿™æ˜¯ä¸€ä»½ç»è¿‡ç³»ç»Ÿæ•´åˆçš„ã€ŠSparkle v2.3 æ”¹ç‰ˆå®æ–½æŒ‡å—ï¼šå…¨èƒ½ä¸»é¡µä¸è®¤çŸ¥æ£±é•œã€‹ã€‚

è¿™ä»½æ–‡æ¡£å°†æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„â€œé«˜å¯†åº¦ä»ªè¡¨ç›˜â€ã€â€œå…¨èƒ½è¾“å…¥å²›â€ã€â€œå¿ƒå¢ƒå¤©æ°”â€ä»¥åŠâ€œè®¤çŸ¥æ£±é•œâ€æ•´åˆæˆäº†ä¸€ä¸ªå®Œæ•´çš„é€šè¿‡é€»è¾‘ï¼Œä¸ä»…åŒ…å«UIè®¾è®¡ï¼Œè¿˜åŒ…å«äº†èƒŒåçš„ä¸šåŠ¡é€»è¾‘å’ŒæŠ€æœ¯å®ç°è·¯å¾„ã€‚

ä½ å¯ä»¥ç›´æ¥å°†å…¶ä½œä¸º **PRD (äº§å“éœ€æ±‚æ–‡æ¡£)** åˆ†å‘ç»™ Cursor/Windsurf ç­‰ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œæˆ–ç›´æ¥å‘ç»™å¼€å‘å›¢é˜Ÿã€‚

---

# Sparkle v2.3 æ”¹ç‰ˆå®æ–½æŒ‡å—ï¼šå…¨èƒ½ä¸»é¡µä¸è®¤çŸ¥æ£±é•œ

**ç‰ˆæœ¬**ï¼šv2.3 (Conversational Dashboard & Cognitive Prism)
**æ–‡æ¡£çŠ¶æ€**ï¼šReady for Implementation
**æ ¸å¿ƒç›®æ ‡**ï¼šå°† App ä»â€œå·¥å…·é›†åˆâ€é‡æ„ä¸ºâ€œAI é©±åŠ¨çš„æˆé•¿ä¼´ä¾£â€ã€‚ä¸»é¡µä¸å†æ˜¯åˆ—è¡¨ï¼Œè€Œæ˜¯å¯¹è¯çš„èµ·ç‚¹å’ŒçŠ¶æ€çš„é©¾é©¶èˆ±ã€‚

---

## 1. æ ¸å¿ƒè®¾è®¡ç†å¿µ (Design Philosophy)

1. **Conversational First (å¯¹è¯ä¼˜å…ˆ)**ï¼šæ‰€æœ‰çš„è¾“å…¥ï¼ˆä»»åŠ¡ã€æƒ³æ³•ã€åæ§½ã€æ±‚åŠ©ï¼‰ç»Ÿä¸€é€šè¿‡åº•éƒ¨çš„â€œå…¨èƒ½è¾“å…¥å²›â€è¿›å…¥ï¼Œç”± AI æ„å›¾è¯†åˆ«åˆ†æµã€‚
2. **Dashboard Visualization (ä»ªè¡¨ç›˜åŒ–)**ï¼šä¸»é¡µé‡‡ç”¨ Bento Gridï¼ˆä¾¿å½“ç›’ï¼‰ç½‘æ ¼å¸ƒå±€ï¼Œé«˜å¯†åº¦å±•ç¤ºâ€œå½“å‰çŠ¶æ€â€ï¼Œè€Œéè®©ç”¨æˆ·åœ¨åˆ—è¡¨ä¸­è¿·å¤±ã€‚
3. **Introspective (å†…çœ)**ï¼šä¸ä»…è®°å½•â€œåšäº†ä»€ä¹ˆâ€ï¼Œæ›´é€šè¿‡ã€è®¤çŸ¥æ£±é•œã€‘è®°å½•â€œä¸ºä»€ä¹ˆæ²¡åšå¥½â€ï¼Œå…³æ³¨è¡Œä¸ºæ¨¡å¼ã€‚

---

## 2. ğŸ  æ–°ç‰ˆä¸»é¡µæ¶æ„ (The Cockpit)

### 2.1 è§†è§‰é£æ ¼ (Visual Identity)

* **ä¸»é¢˜**ï¼šDeep Space (æ·±ç©º)ã€‚èƒŒæ™¯ä¸ºæ·±è“è‡³é»‘è‰²çš„å¾„å‘æ¸å˜ï¼Œæ¨¡æ‹Ÿæ˜Ÿç©ºã€‚
* **æè´¨**ï¼šGlassmorphism (æ¯›ç»ç’ƒ)ã€‚æ‰€æœ‰å¡ç‰‡å…·å¤‡åŠé€æ˜ã€æ¨¡ç³ŠèƒŒæ™¯å’Œå¾®å¼±çš„è¾¹æ¡†å…‰æ™•ã€‚
* **åŠ¨æ•ˆ**ï¼šRive åŠ¨ç”»é©±åŠ¨çš„â€œå¿ƒå¢ƒå¤©æ°”â€å’Œâ€œä¸“æ³¨ç«è‹—â€ã€‚

### 2.2 å¸ƒå±€ç»“æ„ (Layout Stack)

ä¸»é¡µç”±ä¸Šè‡³ä¸‹åˆ†ä¸ºä¸‰ä¸ªå±‚çº§ï¼š

#### A. é¡¶éƒ¨ï¼šå¿ƒå¢ƒå¤©æ°”ç³»ç»Ÿ (Inner Weather Header)

* **åŠŸèƒ½**ï¼šå³æ—¶åé¦ˆç”¨æˆ·çš„â€œé•¿æœŸè®¡åˆ’å¥åº·åº¦â€ä¸â€œä»Šæ—¥çŠ¶æ€â€ã€‚
* **äº¤äº’**ï¼šèƒŒæ™¯å…¨å®½åŠ¨æ€å¤©æ°”ï¼Œå‰æ™¯å±•ç¤ºä»Šæ—¥æ ¸å¿ƒèšç„¦ã€‚
* **å¤©æ°”æ˜ å°„é€»è¾‘**ï¼š
* â˜€ï¸ **æ™´ç©º**ï¼šæœ¬å‘¨è®¡åˆ’å®Œæˆç‡ > 80% ä¸”ä»Šæ—¥æ— é€¾æœŸã€‚
* â˜ï¸ **å¤šäº‘/é›¾**ï¼šè®¡åˆ’è¿›åº¦è½åï¼Œæˆ–è¿ç»­ 2 å¤©æœªå¤ä¹ ã€‚
* ğŸŒ§ï¸ **é›·é›¨**ï¼šæ£€æµ‹åˆ°ä¸´è¿‘ DDL ä¸”æœªå¼€å§‹ï¼Œæˆ–â€œç„¦è™‘â€é—ªå¿µå¢å¤šã€‚
* â˜„ï¸ **æµæ˜Ÿé›¨**ï¼šä»Šæ—¥ä¸“æ³¨æ—¶é•¿çªç ´å†å²è®°å½• / æ”»å…‹é«˜éš¾åº¦èŠ‚ç‚¹ã€‚



#### B. ä¸­éƒ¨ï¼šBento Grid ä»ªè¡¨ç›˜ (Body)

é‡‡ç”¨ `StaggeredGridView` (äº¤é”™ç½‘æ ¼) å¸ƒå±€ï¼ŒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š

1. **ğŸ”¥ ä¸“æ³¨å…¥å£ (Deep Dive Card)** [å  2x2 æˆ– 2x1]
* å±•ç¤ºï¼šå®æ—¶ç‡ƒçƒ§çš„ç«è‹—ï¼ˆå¼ºåº¦éšä»Šæ—¥æ—¶é•¿å˜åŒ–ï¼‰ã€‚
* æ–‡æ¡ˆï¼šâ€œä»Šæ—¥ä¸“æ³¨ 3h 20mâ€ã€‚
* *Action*ï¼šç‚¹å‡»ç›´æ¥è¿›å…¥ã€ä¸“æ³¨é©¾é©¶èˆ±ã€‘ï¼ˆæ— ç¼è½¬åœºï¼‰ã€‚


2. **ğŸ’ è®¤çŸ¥æ£±é•œ (Cognitive Prism Card)** [å  1x1]
* å±•ç¤ºï¼šæœ¬å‘¨ç”Ÿæˆçš„â€œå®šå¼å…³é”®è¯â€ï¼ˆå¦‚ #ç•éš¾é€ƒé¿ï¼‰ã€‚
* çŠ¶æ€ï¼šå¦‚æœæœ‰æ–°çš„ AI å½’å› æŠ¥å‘Šç”Ÿæˆï¼Œå¡ç‰‡è¾¹ç¼˜å‘¼å¸é—ªçƒã€‚
* *Action*ï¼šç‚¹å‡»æŸ¥çœ‹è¯¦ç»†å½’å› å›¾è¡¨ã€‚


3. **ğŸƒ å†²åˆºè¿›åº¦ (Sprint Card)** [å  1x1]
* å±•ç¤ºï¼šå½“å‰â€œæœŸæœ«å†²åˆºâ€æˆ–â€œè€ƒç ”è®¡åˆ’â€çš„ç¯å½¢è¿›åº¦æ¡ + å‰©ä½™å¤©æ•°ã€‚


4. **ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨ (Next Actions)** [å  2xN]
* å±•ç¤ºï¼šç´§å‡‘åˆ—è¡¨ï¼Œä»…æ˜¾ç¤º**æœªæ¥ 3 å°æ—¶å†…**éœ€è¦åšçš„ Top 3 ä»»åŠ¡ã€‚
* è®¾è®¡ï¼šæç®€æ¡ç›®ï¼Œä¸æ˜¾ç¤º checkboxï¼Œç‚¹å‡»æ ‡è®°å®Œæˆã€‚



#### C. åº•éƒ¨ï¼šå…¨èƒ½è¾“å…¥å²› (The Omni-Bar)

* **ä½ç½®**ï¼šåº•éƒ¨æ‚¬æµ®ï¼Œæ›¿ä»£ä¼ ç»Ÿçš„ BottomNavigationBarã€‚
* **å½¢æ€**ï¼šå¸¸æ€ä¸ºèƒ¶å›Šå‹è¾“å…¥æ¡†ï¼Œè¾“å…¥æ—¶å±•å¼€ã€‚
* **åŠŸèƒ½**ï¼šæ‰€æœ‰äº¤äº’çš„å”¯ä¸€å…¥å£ã€‚

---

## 3. æ ¸å¿ƒåŠŸèƒ½è¯¦è¿°

### 3.1 ğŸ•¹ï¸ å…¨èƒ½è¾“å…¥å²› (Omni-Bar) äº¤äº’é€»è¾‘

è¿™æ˜¯ v2.3 çš„çµé­‚ã€‚ç”¨æˆ·æ— éœ€æ€è€ƒâ€œæˆ‘è¦å»å“ªé‡Œåˆ›å»ºä»»åŠ¡â€ï¼Œåªéœ€æ€è€ƒâ€œæˆ‘æƒ³è¯´ä»€ä¹ˆâ€ã€‚

**äº¤äº’æµç¨‹**ï¼š

1. **Input**: ç”¨æˆ·åœ¨åº•éƒ¨è¾“å…¥æ–‡å­—æˆ–è¯­éŸ³ï¼ˆä¾‹å¦‚ï¼šâ€œçƒ¦æ­»äº†ï¼Œé«˜æ•°ä½œä¸šå†™ä¸å®Œâ€ï¼‰ã€‚
2. **Classifier (AI åˆ†æµ)**ï¼šå‰ç«¯å…ˆè°ƒç”¨è½»é‡çº§åˆ†ç±»æ¥å£ï¼ˆæˆ– Regexï¼‰ï¼Œåç«¯é€šè¿‡ LLM ç¡®è®¤æ„å›¾ã€‚
3. **Action Dispatch (åˆ†å‘)**ï¼š
* **Case A: é—ªå¿µ/æƒ…ç»ª** (æ„å›¾ï¼šåæ§½ã€ç„¦è™‘ã€çµæ„Ÿ)
* *UI åé¦ˆ*ï¼šè¾“å…¥æ¡†æ³›èµ·ç´«è‰²å…‰æ™•ï¼Œæ–‡å­—åŒ–ä½œç²’å­è¢«å¸å…¥ä¸»é¡µçš„ã€è®¤çŸ¥æ£±é•œã€‘å¡ç‰‡ã€‚
* *Result*ï¼šå­˜å…¥ `cognitive_fragments` è¡¨ï¼Œä¸æ‰“æ–­ç”¨æˆ·æµç¨‹ã€‚


* **Case B: ä»»åŠ¡æŒ‡ä»¤** (æ„å›¾ï¼šåˆ›å»ºå¾…åŠ)
* *UI åé¦ˆ*ï¼šç”Ÿæˆä¸€å¼  Task Card é£å…¥ã€ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‘åŒºåŸŸã€‚
* *Result*ï¼šè§£ææ—¶é—´ã€æ ‡é¢˜ï¼Œå†™å…¥ `tasks` è¡¨ã€‚


* **Case C: å¤æ‚è¾…å¯¼** (æ„å›¾ï¼šæé—®ã€è§„åˆ’ã€çŸ¥è¯†)
* *UI åé¦ˆ*ï¼šç•Œé¢å‘ä¸Šæ¨ç§»ï¼Œåº•éƒ¨æ‰©å±•ä¸ºå…¨å±èŠå¤©çª—å£ (Chat Screen)ã€‚
* *Result*ï¼šå¼€å¯å¤šè½®å¯¹è¯æ¨¡å¼ã€‚





### 3.2 ğŸ§˜ ä¸“æ³¨æ¨¡å¼ï¼šé©¾é©¶èˆ± (Deep Dive Cockpit)

ç‚¹å‡»ä¸»é¡µç«è‹—è¿›å…¥ã€‚è¿™æ˜¯ä¸€ä¸ª**â€œåœç•™å‹â€**ç•Œé¢ï¼Œæ—¨åœ¨æ›¿ä»£ç‰©ç†ä¹¦æ¡Œä¸Šçš„å·¥å…·ã€‚

* **HUD é£æ ¼**ï¼šå…¨é»‘èƒŒæ™¯ï¼Œé«˜å¯¹æ¯”åº¦è§å…‰ç»¿/è“çº¿æ¡ã€‚
* **ç»„ä»¶ (Widgets)**ï¼š
* **é‡å­æ—¶é’Ÿ**ï¼šè§†è§‰åŒ–çš„å€’è®¡æ—¶åœ†ç¯ã€‚
* **AI ä¼´è¯» (Sidekick)**ï¼šä¾§è¾¹å¾®å‹è¾“å…¥æ¡†ã€‚è¾“å…¥â€œè´å¶æ–¯å®šç†â€ï¼Œå¼¹å‡ºä¸€ä¸ªåŠå±å¡ç‰‡è§£é‡Šæ¦‚å¿µã€‚*ï¼ˆç”¨å®Œå³èµ°ï¼Œä¸è¿›å…¥èŠå¤©é¡µï¼‰*
* **æ•°å­—ç»“ç•Œ**ï¼š
* å¼€å…³ï¼šä¸€é”®å±è”½é€šçŸ¥ï¼ˆè°ƒç”¨åŸç”Ÿ DND APIï¼‰ã€‚
* ç™½å™ªéŸ³ï¼šå†…ç½®é›¨å£°/å’–å•¡é¦†å£°éŸ³æ··åˆå™¨ã€‚





### 3.3 ğŸ§  è®¤çŸ¥æ£±é•œ (Cognitive Prism)

* **éšå¼æ•æ‰**ï¼šè‹¥ä»»åŠ¡ `Actual Time` > `Estimated Time` * 1.5ï¼Œç³»ç»Ÿè‡ªåŠ¨è®°å½•ä¸€æ¬¡â€œè§„åˆ’åå·®â€ã€‚
* **æ˜¾å¼æ•æ‰**ï¼šé€šè¿‡ Omni-Bar æ”¶é›†çš„â€œåæ§½â€ã€‚
* **å½’å› å¡ç‰‡ (Weekly Report)**ï¼š
* AI æ¯å‘¨æ—¥æ™šç”Ÿæˆã€‚
* å†…å®¹ç»“æ„ï¼š
* **å®šå¼åç§°**ï¼šğŸš« â€œæœ€åæ—¶åˆ»çš„èµŒå¾’â€
* **ç—‡çŠ¶**ï¼šæ€»åœ¨ DDL å‰ 1 å°æ—¶æé™æ“ä½œã€‚
* **å¤„æ–¹**ï¼šä¸‹å‘¨å°è¯•â€œ5åˆ†é’Ÿèµ·æ­¥æ³•â€ã€‚





---

## 4. æŠ€æœ¯å®æ–½è·¯å¾„ (Implementation Guide)

### Phase 1: åŸºç¡€è®¾æ–½ (Backend & Database)

1. **Schema æ›´æ–°**ï¼š
* åˆ›å»º `cognitive_fragments` (å­˜å‚¨é—ªå¿µ/è¡Œä¸ºæ•°æ®)ã€‚
* åˆ›å»º `behavior_patterns` (å­˜å‚¨ AI åˆ†æåçš„å®šå¼)ã€‚
* æ›´æ–° `user_preferences` ä»¥å­˜å‚¨å¤©æ°”æ˜ å°„é˜ˆå€¼ã€‚


2. **API å¼€å‘**ï¼š
* `POST /api/v1/omnibar/dispatch`: æ ¸å¿ƒåˆ†æµæ¥å£ã€‚æ¥æ”¶æ–‡æœ¬ï¼Œè¿”å› `action_type` (CAPSULE | TASK | CHAT) å’Œå¤„ç†ç»“æœã€‚
* `GET /api/v1/dashboard/status`: èšåˆæ¥å£ï¼Œä¸€æ¬¡æ€§è¿”å›å¤©æ°”çŠ¶æ€ã€ç«è‹—å¼ºåº¦ã€Top 3 ä»»åŠ¡ã€å†²åˆºè¿›åº¦ã€‚



### Phase 2: å…¨èƒ½è¾“å…¥å²› (Frontend - Mobile)

1. **Omni-Bar Widget**ï¼š
* å®ç°å¤æ‚çš„åŠ¨ç”»çŠ¶æ€æœºï¼ˆIdle, Typing, Loading, Success_Animationï¼‰ã€‚
* é›†æˆ `Speech-to-Text` æ’ä»¶ã€‚


2. **æ„å›¾å“åº”é€»è¾‘**ï¼š
* å‰ç«¯éœ€è¦å¤„ç†â€œç²’å­å¸å…¥åŠ¨ç”»â€ï¼ˆé’ˆå¯¹é—ªå¿µï¼‰å’Œâ€œå¡ç‰‡é£å…¥åŠ¨ç”»â€ï¼ˆé’ˆå¯¹ä»»åŠ¡ï¼‰ã€‚



### Phase 3: ä»ªè¡¨ç›˜ä¸ä¸“æ³¨æ¨¡å¼ (Frontend - Mobile)

1. **Bento Grid å¸ƒå±€**ï¼š
* ä½¿ç”¨ `flutter_staggered_grid_view` åŒ…ã€‚
* å°è£…é€šç”¨çš„ `GlassCard` ç»„ä»¶ï¼ˆç»Ÿä¸€æ¯›ç»ç’ƒæ•ˆæœï¼‰ã€‚


2. **å¤©æ°”åŠ¨æ•ˆ**ï¼š
* å¼•å…¥ `rive` æˆ– `lottie` èµ„æºæ–‡ä»¶ã€‚
* ç¼–å†™ `WeatherService` å‰ç«¯é€»è¾‘ï¼Œæ ¹æ®åç«¯è¿”å›çš„çŠ¶æ€åˆ‡æ¢åŠ¨ç”»ã€‚


3. **ä¸“æ³¨é©¾é©¶èˆ±**ï¼š
* å®ç°ç™½å™ªéŸ³æ’­æ”¾å™¨ (`audioplayers`)ã€‚
* è°ƒç”¨åŸç”Ÿå¹³å°é€šé“ (Platform Channels) æ§åˆ¶å‹¿æ‰°æ¨¡å¼ã€‚



### Phase 4: è®¤çŸ¥æ£±é•œé€»è¾‘ (AI Logic)

1. **Prompt Engineering**ï¼š
* ç¼–å†™ç”¨äºâ€œæ„å›¾åˆ†ç±»â€çš„ Prompt (Router Agent)ã€‚
* ç¼–å†™ç”¨äºâ€œè¡Œä¸ºå½’å› â€çš„ Prompt (Psychology Agent)ã€‚


2. **å®šæ—¶ä»»åŠ¡**ï¼š
* è®¾ç½®æ¯å‘¨æ—¥çš„ Crontabï¼Œè§¦å‘å½’å› åˆ†æå¹¶ç”Ÿæˆ Push é€šçŸ¥ã€‚



---

## 5. å¼€å‘ Prompt å‚è€ƒ

*ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ Prompt æŒ‡å¯¼ Agent ç¼–å†™ä»£ç ï¼š*

**é’ˆå¯¹ä¸»é¡µ UI å¼€å‘ï¼š**

> "è¯·åŸºäº Flutter ç¼–å†™ä¸€ä¸ªæ–°çš„ `HomeScreen`ã€‚èƒŒæ™¯ä½¿ç”¨æ·±è‰²å¾„å‘æ¸å˜ã€‚å¸ƒå±€ä½¿ç”¨ `flutter_staggered_grid_view` å®ç° Bento Gridã€‚é¡¶éƒ¨æ˜¯ä¸€ä¸ªåä¸º `WeatherHeader` çš„ç»„ä»¶ï¼Œä¸­éƒ¨åŒ…å« `FocusCard`, `PrismCard`, `SprintCard`ã€‚åº•éƒ¨æ”¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‚¬æµ® `OmniBar` ç»„ä»¶ã€‚æ‰€æœ‰å¡ç‰‡éœ€åº”ç”¨ Glassmorphism é£æ ¼ã€‚"

**é’ˆå¯¹ Omni-Bar åç«¯é€»è¾‘ï¼š**

> "è¯·åœ¨ FastAPI ä¸­å®ç° `/omnibar/dispatch` æ¥å£ã€‚å®ƒæ¥æ”¶ç”¨æˆ·æ–‡æœ¬ï¼Œä½¿ç”¨ LLM åˆ¤æ–­æ„å›¾ã€‚å¦‚æœæ„å›¾æ˜¯æƒ…æ„Ÿå®£æ³„ï¼Œå­˜å…¥ `CognitiveService` å¹¶è¿”å› 'CAPSULE'ï¼›å¦‚æœæ˜¯æ˜ç¡®çš„ä»»åŠ¡æŒ‡ä»¤ï¼ˆå¦‚'æ˜å¤©æé†’æˆ‘...'ï¼‰ï¼Œè°ƒç”¨ `TaskService` åˆ›å»ºä»»åŠ¡å¹¶è¿”å› 'TASK'ï¼›å…¶ä»–æƒ…å†µè¿”å› 'CHAT'ã€‚"

---

æ­¤æ–¹æ¡ˆå·²å‡†å¤‡å¥½è¿›å…¥å¼€å‘é˜¶æ®µã€‚å»ºè®®ä¼˜å…ˆå®Œæˆ **Backend Schema** å’Œ **Omni-Bar** çš„æ ¸å¿ƒäº¤äº’ï¼Œè¿™æ˜¯æ–°ä½“éªŒçš„åŸºç¡€ã€‚Sparkle v2.3 Implementation Progress Report

  âœ… Completed Tasks

  Backend Development (Phase 1: Infrastructure)

   1. User Model Update: Modified backend/app/models/user.py to add the weather_preferences column, which will store
      user-specific thresholds for the "Inner Weather" system.
   2. OmniBarService Implementation: Created backend/app/services/omnibar_service.py. This service is responsible
      for:
       * Receiving user text input.
       * Utilizing LLMService to classify the intent of the input (as a TASK, CAPSULE, or CHAT).
       * Dispatching the request to the appropriate backend service (TaskService for task creation, CognitiveService
         for capturing cognitive fragments).
   3. DashboardService Implementation: Created backend/app/services/dashboard_service.py. This service aggregates
      various user-specific data to present a holistic view for the dashboard, including:
       * A simplified calculation of the "Inner Weather" status.
       * Retrieval of flame levels and brightness from the User model.
       * Fetching details of active sprint plans.
       * Retrieving the top 3 pending tasks ("Next Actions").
   4. OmniBar API Endpoint: Created backend/app/api/v1/omnibar.py to expose the omnibar/dispatch endpoint, allowing
      the frontend to send user input for classification and processing.
   5. Dashboard API Endpoint: Created backend/app/api/v1/dashboard.py to expose the dashboard/status endpoint,
      providing the frontend with all necessary data to render the new dashboard.
   6. API Router Registration: Updated backend/app/api/v1/router.py to include the newly created omnibar and
      dashboard API routers, making the new endpoints accessible.

  Mobile Frontend Setup (Phase 2 Initial Steps)

   1. `flutter_staggered_grid_view` Dependency: Added flutter_staggered_grid_view to mobile/pubspec.yaml to enable
      the flexible Bento Grid layout for the new home screen.
   2. API Endpoints Update: Modified mobile/lib/core/network/api_endpoints.dart to include constants for
      omnibarDispatch and dashboardStatus, ensuring the frontend can correctly reference the new backend endpoints.
   3. OmniBarRepository Implementation: Created mobile/lib/data/repositories/omnibar_repository.dart, providing a
      clean interface for the frontend to interact with the backend's OmniBar API.
   4. DashboardRepository Implementation: Created mobile/lib/data/repositories/dashboard_repository.dart, offering a
      dedicated repository for fetching dashboard status data from the backend.
   5. OmniBar Widget: Created mobile/lib/presentation/widgets/home/omnibar.dart. This widget includes a text input
      field, basic loading state, and logic to call the OmniBarRepository and handle the returned action type
      (navigate to chat, show task created message, or show capsule captured message).
   6. BentoGrid Widget: Created mobile/lib/presentation/widgets/home/bento_grid.dart, a reusable widget that
      leverages flutter_staggered_grid_view to facilitate the flexible grid layout of dashboard cards.

  ğŸ“ Remaining Tasks

  Mobile Frontend Development (Phase 2: Omni-Bar & Dashboard Setup)

   1. Implement `DashboardProvider`:
       * Create a Riverpod provider (mobile/lib/presentation/providers/dashboard_provider.dart) that uses
         DashboardRepository to fetch and manage the dashboard status data. This provider will expose the weather,
         flame status, sprint progress, and next actions to other widgets.
   2. Implement `WeatherHeader` Widget:
       * Create mobile/lib/presentation/widgets/home/weather_header.dart.
       * This widget will consume the weather data from the DashboardProvider to dynamically display the "Inner
         Weather" status. Initially, it will use static icons/colors mapped to the weather types (sunny, cloudy,
         rainy).
   3. Refactor `HomeScreen` (`mobile/lib/presentation/screens/home/home_screen.dart`):
       * Remove Existing Dashboard Content: Replace the current _DashboardTab's CustomScrollView content.
       * Integrate `BentoGrid`: Use the newly created BentoGrid widget as the primary layout for the dashboard.
       * Place `WeatherHeader`: Position the WeatherHeader prominently at the top of the dashboard.
       * Create Placeholder Cards: Implement the core dashboard cards as simple widgets and place them within the
         BentoGrid. These will include:
           * Focus Entry Card: Placeholder for the "Deep Dive Card" (flame animation, focus time).
           * Cognitive Prism Card: Placeholder for the "Cognitive Prism" (weekly patterns, status).
           * Sprint Progress Card: Placeholder for displaying active sprint plan progress.
           * Next Actions Card: Placeholder for displaying the top 3 upcoming tasks.
       * Position `OmniBar`: Integrate the OmniBar widget at the bottom of the Scaffold, ensuring it floats above
         other content and acts as the primary input. A Stack widget can be used within the Scaffold's body to
         achieve this floating effect.
  Mobile Frontend Development (Phase 3: Dashboard & Focus Mode UI Enhancements)

   1. Create Detailed Dashboard Cards:
       * `FocusCard` Widget: Develop a dedicated widget to visualize the "burning flame" animation (using Lottie if
         Rive is too complex for initial integration) and display the user's daily focus time.
       * `PrismCard` Widget: Create a widget to display the "Cognitive Prism" insights, such as "å®šå¼å…³é”®è¯" (fixed
         patterns) and a breathing animation for new AI attribution reports.
       * `SprintCard` Widget: Enhance the sprint card to show a circular progress bar for the active sprint plan and
         remaining days until the target date.
       * `NextActionsCard` Widget: Implement a compact list to display the top 3 pending tasks, allowing quick
         interactions (e.g., tap to mark complete).
   2. OmniBar Animations: Add more refined animations for the OmniBar to expand, collapse, and show loading/success
      states, aligning with the "Capsuleæ³›èµ·ç´«è‰²å…‰æ™•" and "Task Cardé£å…¥" descriptions.
   3. Native DND Integration (Stretch Goal): Explore and implement platform channels to control the device's "Do Not
      Disturb" (DND) mode when the user enters the "Focus Cockpit."
   4. Rive/Lottie Animations for Weather/Flame (Stretch Goal): Integrate more complex Rive or Lottie animations for
      the "Inner Weather Header" and "Focus Flame" to enhance visual appeal.

  This structured approach ensures that the core functionality of Sparkle v2.3 is built incrementally, allowing for
  continuous testing and refinement.


  